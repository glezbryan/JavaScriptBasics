<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Rock, Paper, Scissors</title>
        <link rel="stylesheet" href="index.css">
    </head>
    <body>
        <h1>Rock, Paper, Scissors</h1><hr>

        <button onclick="playGame('Rock')">Rock</button>
        <button onclick="playGame('Paper')">Paper</button>
        <button onclick="playGame('Scissors')">Scissors</button>

        <p class="js-result"></p>
        <p class="js-moves"></p>
        <p class="js-score"></p>

        <button onclick="
            score.wins = 0;
            score.losses = 0;
            score.ties = 0;
            localStorage.removeItem('score');
            updateScore();
        ">Reset Score</button>

        <script>
            let score = JSON.parse(localStorage.getItem('score')) || {
                            wins: 0,
                            losses: 0,
                            ties:0
                        };
            updateScore();
            

            function updateScore(){
                document.querySelector('.js-score')
                .innerHTML = `Wins: ${score.wins}, Losses: ${score.losses}, Ties: ${score.ties}`;
            }

            function getBotChoice(){
                var random_num = (Math.random()*3);
                if(random_num > 2)
                    return 'Rock';
                else if(random_num > 1)
                    return 'Paper';
                else
                    return 'Scissors';
            }

            function playGame(User){
                bot = getBotChoice();
                result = '';
                switch (User) {
                    case 'Rock':
                        if(bot == 'Rock')
                            result = `It's a tie!`;
                        else if(bot == 'Paper')
                            result =`You lose...`;
                        else 
                            result =   `You win!`;
                        break;
                    case 'Paper':
                        if(bot == 'Rock')
                            result = `You win!`;
                        else if(bot == 'Paper')
                            result = `It's a tie!`;
                        else 
                            result = `You lose...`;
                        break;
                    case 'Scissors':
                        if(bot == 'Rock')
                            result = `You lose...`;
                        else if(bot == 'Paper')
                            result = `You win!`;
                        else 
                            result = `It's a tie!`;
                        break;
                
                    default:
                        return `ERROR: Invalid parameters`
                        break;
                }

                if(result === `You win!`)
                    score.wins++;
                else if(result === `You lose...`)
                    score.losses++;
                else
                    score.ties++;

                localStorage.setItem('score', JSON.stringify(score))

                updateScore();
                document.querySelector('.js-result')
                    .innerHTML = result;
                document.querySelector('.js-moves')
                    .innerHTML = ` You selected ${User} - The computer selected ${bot}.`
            }
        </script>
    </body>
</html>